<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

  <link rel="stylesheet" href="/css/styles.css">
  </link>

  <link rel="shortcut icon" href="<%= general[0].favicon %>">

  <title>El Competidor</title>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>


 
 <script src="https://competidor.store/socket.io/socket.io.js"></script>



</head>


<body>


  <div class="caja">

    <!--<h1 class="logo"><img src="img/logo.png" alt=""></h1>-->
    <input type="checkbox" class='bx bx-menu' id="toogle_menu">
    <span class="tooltip_categ">Categorias</span>
    <img id="logo_menu" src="<%= general[0].favicon %>" alt="" style="width: 100px; height: 60px;">
    <nav>

      <ul class="menu">
        <li class="sub"> <a class="item_menu active" href="#alimentos">Alimentos<div id="li_hover"> </div> </a></li>
        <li class="sub"><a class="item_menu" href="#aseo_personal">Aseo Personal</a></li>
        <li class="sub"><a class="item_menu" href="#ferreteria">Ferreteria</a></li>
        <li><a class="item_menu" href="#hogar">Hogar</a></li>
        <li><a class="item_menu" href="#cosmetica">Cosmetica</a></li>
        <li><a class="item_menu" href="#salud">Salud</a></li>
        <li><a class="item_menu" href="#papeleria">Papeleria</a></li>

     </ul>
     <div id="cont_car">
      <a id="item_car"  name='shopping-bag'></a>
      <svg  id="icon_car"  xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1); cursor:pointer;"><path d="M5 22h14a2 2 0 0 0 2-2V9a1 1 0 0 0-1-1h-3v-.777c0-2.609-1.903-4.945-4.5-5.198A5.005 5.005 0 0 0 7 7v1H4a1 1 0 0 0-1 1v11a2 2 0 0 0 2 2zm12-12v2h-2v-2h2zM9 7c0-1.654 1.346-3 3-3s3 1.346 3 3v1H9V7zm-2 3h2v2H7v-2z"></path></svg>
      <a id="notif_data-bar" ></a>
      <img id="user_sigin" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAYdJREFUSEvllu1NA0EMRCeVECoBKglUAlRCqASoBKgE9KS15Oztx9wFKT+wFEXROX4e27Gz04VsdyGutoL3ku4lfZXX+1oBa8G3kl4kAc5GAs+Sjm4Ca8AoBDoy4E8O3AWj9K0EzOpQzrPHUgWePUialt4FAwWAXZe+ZmEk8JkSw2doLvinRBmVkhKjHNV/As5lpoy9Acp+d7NyO4pzGUfgPHytdpyU3gHzBfpHAgwNalqW52Aad+pQCNE/Prb6zM8Mxb3ni0RdMGoJHpPNAKH+W9IhLRRrsMjCBeNbw2sVQGkD71NbA45glP2mqI9d/eFurAiyBTxV4zi44LhGV40DERzU03N6f/bKnPW1J27a75HivImyqt7wxMRn39de73vgGjpaHFl1tISdjXWvVQ8cR4EvT/duo971GV0cjRZ4tqWcocUn7+7FtmuBnb3swPNgLjZaCxxl5vxxjc6xXL2Ti1WD3dvrJtO90SPwlqGqE7LB9CX+uk63jyG7G89dmQZjncv/A/8Cb/lcHzChMD8AAAAASUVORK5CYII="/>
     
      <div id="opciones_user">
        <h4 id="nombre_user"><%= userlogin.user%></h4>
        <ul>
          <li><a id="btn_dataUser">Mis datos</a><a id="notif_data" ></a></li>
          <li><a href="/logout" >Cerrar Secion</a></li>
        </ul>
      </div>
    
      <box-icon type='solid'></box-icon>
      <div  id="cont_buy" >
       
      <div id="product_car">
    
        <script type="text/javascript">
          
      </script>
    <script>
 /* var pdf= document.querySelector("#pdf")
  pdf.onclick=function(){
   
            var doc=new jsPDF();
          //  let mensaje=document.getElementById('esc').value;
            doc.text(20,20,"mensaje");
            doc.addPage();
            doc.text(20,20,'Mi trabajo!!');
            doc.save('Test.pdf');
            window.print(doc)
        
  }
     */
      var cont_buy=document.querySelector("#cont_buy");
   
    var buy_car=document.createElement("div");
    buy_car.id="buy_car";
    var label_total=document.createElement("h3");
    label_total.id="label_total"
    var title_total=document.createElement("h3");
    title_total.innerHTML="Total:"
    var buy=document.createElement("button");
    buy.id="buy"
    var buyA=document.createElement("a");
    buyA.id="Abuy"
    buyA.appendChild(buy)

    buy.innerHTML="Comprar"
    buy_car.appendChild(buyA)
    buy_car.appendChild(title_total)
    buy_car.appendChild(label_total)
  //  buy_car.appendChild(buy)
    cont_buy.appendChild(buy_car)
      




    window.addEventListener("load", function(){
      
  var nombreuser= document.querySelector("#nombre_user") 
  var  item_car= document.querySelector("#item_car") 

  var nombre="<%= userlogin._id%>";
  var carro={
      nombreProd: "content",
      valor:"19000"
  }
  if(nombre){
 
    item_car.style="visibility:visible"
  socket.emit("idUser", nombre, carro)

  


  
  }else{
    prod_clean()
  }

})
    
    </script>
 
</div>

</div>
     </div>
    
     
    </nav>

   
   <style>
     @keyframes options{

from{
height: 0;
}to{
 height: 70px;
}

}
    @keyframes car{

   from{
   height: 0;
   }to{
    height: 400px;
   }
   
  }
  #opciones_user.active{
    display: flex;
    flex-direction: column;
  
  }
  #opciones_user{
    position: fixed;
    width: 150px;
    height: fit-content;
    right: 20px;
    top: 60px;
    overflow: hidden;
    animation: options .5s ease-in;
   border-radius: 4px;
  background-color: #076fe576;
    display: none;
    z-index: 101;
  }
  #opciones_user h4{
    position: relative;
    top: 0;
    font-family: 'Rubik', sans-serif;
    text-transform: none;
  padding-bottom: 5px;
    text-align: center;
    height: 2px;
    width: 150px;
    color: #090909 ;
  }
  #opciones_user ul{
    position: relative;
    width: 100%;
    height: fit-content;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    visibility: visible;
    gap: 0;

  }
  #opciones_user li{
    padding: 3px;
    cursor: pointer;
    position: relative;
    left: 0;
    list-style: none;
    width: 100%;
    height: 30px;
    background: #f6f6fa;
    border: 0;
    
  }
  #notif_data{
    position: absolute;
    visibility: hidden;
    background: red;
    border-radius: 50%;
    width: 10px;
    height: 10px;
    animation: 3s ease-out;
  }
  #notif_data-bar{
    visibility: hidden;
    position: relative;
    background: red;
    border-radius: 50%;
    width: 10px;
    height: 10px;
    right: -25px;
  }
  #opciones_user li:hover{
   background: #d2d2d8bb;;

  }
  #opciones_user a{
    text-decoration: none;
    cursor: pointer;
    color: black;
  }
    #cont_buy.active{
      display: block;
      animation: car 1s ease-out;
    }
    #product_car::before{
      animation: car 3s ease-out;
    }
    #product_car{
      width: 100%;
      background: #e4eaf0;
      height: 340px;
      max-height: 400px;
      overflow-y: scroll;
      position: static;
    }
     #cont_buy{
     width: 30vw;
     min-width: 300px;
     height: 400px;
     max-height:400px ;
      background: #0797e59a;
      border-radius: 4px;
      position: fixed;
      z-index: 15;
      right: 20px;
      top: 60px;
      padding: 5px;
      overflow: hidden;
      display: none;
     padding-bottom:5px ;
     font-family: 'Tajawal', sans-serif;
     }
     #product_car::-webkit-scrollbar {display: none;}
    #carItemnone{
      width: 97%;
      height: 150px;
      background: white;
      margin-top: 5px;
     }
     #carItem{
      
      width: 97%;
      height: 100px;
      background: white;
      margin-top: 5px;
      padding: 5px;
      border-bottom:1px solid rgba(130, 32, 32, 0.485);
     }
    #cont_car{
      width: fit-content;
     
      display: flex;
      flex-direction: row;
      gap: 15px;
      position: fixed;
      right: 25px;
     
      
    }
    #cont_car img{
      width: 30px;
      height:30px ;
      z-index: 12;
      cursor: pointer;
}

#item_car{
  background: red;
  width: 15px;
  height: 15px;
  text-align: center;
  border-radius: 50%;
  z-index: 15;
  position: relative;
  left: 25px;
  top:0;
  color:white;
  font-size: 13px;
  cursor: pointer;
  visibility: hidden;

  font-family: 'Tajawal', sans-serif;

}
#car_prodName{
 font-size: 18px;
 color: #2e2a2a;
  
  padding: 0;
  width: 99%;
  height: 15px;
  float: right;
}
#car_prodvalue::before{
content: "$ ";
}
#car_prodvalue{
  position: relative;
  top: 8px;
font-size: 18px;
}
#div_cant_prodCar{
    position: relative;
    height: fit-content;
    width: 90%;
    align-items: center;
  
    display: flex;
    flex-direction: row;
    justify-content: center;
    bottom: 5px;
  }
  #div_cant_prodCar a{
    
    cursor: pointer;
    font-weight: bold;
    border: 1px solid gray ;
   
    text-align:center ;
    margin: 0;
    position: static;
    width:25px;
    height: 20px;
   
    align-items: center;
  }

  #carItemnone {
    font-family: 'Nunito Sans', sans-serif;
    width: 99%;
    height: fit-content;
    text-align: center;
   justify-content: center;
  }

   #carItemnone  h2{
    width: 100%;
    height: fit-content;
  }
  #carItemnone img{
    width: 300px;
    height: 200px;
  }
  #delete_item{
    width: 30px;
    height: 20px;
    border-radius: 5px;
    position: absolute;
    right: 0;
    overflow: hidden;
    border: 0;
    background: rgba(255, 0, 0, 0.46);
  }
  #delete_item img{
width: 100%;
height: 100%;
  }
  #label_total{
    color: #33a31c;
  }
  #label_total::before{
    content: "$ ";
  }
#buy_car{
  width: 95%;
  height: 50px;
  background: rgb(208, 217, 154);
	position: absolute;
 margin-bottom: 0;
 display: flex;
 flex-direction: row;
 padding-left: 10px;
 margin-top: 10px;
 gap: 8px;
 border-radius: 10px;
}
#buy{
  position: absolute;
  width: 100px;
  height: 50px;
  background: #07e597;
  right: 0;
  border-radius: 10px;
  border: 0;
}
@media only screen
  and (min-device-width: 851px)
  and (max-device-width:1168px)
  {
    #opciones_user{
    
      top: 110px;
  }
    #cont_car{
      
      background: #16a07b81 ;
      top: 80px;
      
    }
    #cont_buy{

      top: 110px;
    }
  }
   </style>
    <%- include ('partials/dataUser.ejs') %>
  </div>
  <script>
let caja = document.querySelector(".caja")
        caja.style.background = "<%= general[0].color%>"
var product_car=document.querySelector("#cont_car")
product_car.style=""
        let menu = document.querySelector(".menu")

        let hijos = menu.children;

        //alert(hijos.length)


        for (let index = 0; index < hijos.length; index++) {
          let hijastro = hijos[index];

          let bebe = hijastro.children;
          bebe[0].style.color = "blue"
          bebe[0].onclick=function(){
            let btn_menu1 = document.querySelector("#toogle_menu")
            let menu = document.querySelector(".menu")
            var x = window.screen.width
            if(x<=854){
              btn_menu1 .classList.toggle("bx-rectangle")
               menu.classList.toggle('active');
            }
          
          }
           
          

        }
       

    var btn_menu = document.querySelector("#toogle_menu").onclick =  function closeMenu(){
      let menu = document.querySelector(".menu")
    this.classList.toggle("bx-rectangle")
      menu.classList.toggle('active');
    }
  </script>
 
<%- include ('partials/sigin.ejs') %>
  <div class="container-fluid" id="container-fluid">
    
    <div class="pop-up" id="pop-up">

      <div class="pop-wrap" id="pop-wrap">
        <button id="close_view"> X salir</button>
        <div class="subscription">



          <div id="cont_img">

          
            <img id="image_prod" src="" alt="">
            <a href="" id="etiq_descuentoSlide"> </a>
          </div>
          <div id="info_prod">
            <h1 id="nombre_view"></h1>
            <h1 id="valor_old"></h1>
            <h1 id="valor_view"></h1>
            
            <div id="medida_disp">
            <p id="medida">caja</p>
            <a id="disponible"> </a>
            <h6 id="stock_prod"></h6>
          </div>
          <style>
            #stock_prod{
              opacity: 0;
            }
          </style>
            <h2 id="title_descript">Descipcion</h2>
            <p id="desccripcion_view"> Lorem ipsum dolor sit amet, consectetur adipisicing elit. Qui iure maiores fuga
              necessitatibus illum aliquid, possimus
              odio nesciunt. In tenetur harum ad soluta nostrum illo dolor assumenda dolorem numquam deserunt.</p>


          </div>
          <div id="formulario_env">
            <h1 id="title_form">Datos  Del Pedido </h1>
            <form action="" class="formulario_cliente">

              <label for="nombre">Nombre*</label>
              <input type="text" id="nombre_cliente1" required>

              <label for="nombre">Documento identidad*</label>
              <input type="text" id="documento_cliente1" required>

              <label for="direccion_cliente">Direcion de entrega*</label>
              <input type="text" id="direccion_cliente" placeholder="cra 2#8-56" required>
              <label for="contacto">Cantidad producto*</label>
              <div id="div_cant_prodPop">
                <a id="button_menos">-</a>
                
                <input type="text" id="cant_prod" class="cant_prod" value="0" required>
                <a id="button_mas">+</a>
              </div>
              
                  <script>
                var  button_mas=document.querySelector("#button_mas");
                var  button_menos=document.querySelector("#button_menos");
                var  cant_prod=document.querySelector("#cant_prod");
                var cant=parseInt(cant_prod.value)
                  
                
                  button_mas.onclick= function(){
                  var cant=parseInt(cant_prod.value) 
                  if(cant>=0){
                    var new_cant=cant+1;
                  }
                  

                  cant_prod.value=new_cant
 
                  button_menos.onclick= function(){
                  var cant=parseInt(cant_prod.value);
                  
                  if(cant>=1){
                    var new_cant=cant-1;
                    console.log(cant)
                  }else{
                    new_cant=0
                  }
                

                  cant_prod.value=new_cant

                }

                }
               
                
              
                  </script>

            </form>
            <div class="cont_shop_var">

              <div class="cont-whatsapp">
              
                <a target="_blank" id="whatsapp" style="width: 200px; height: 50px;"> <img src="/img/whatsapp.png"
                    alt="" >
                  <span id="whatsapp_span"></span>
                </a>

               
              
            </div>
            <div class="cont-car_icon" id="add_car">
              <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1)"><circle cx="10.5" cy="19.5" r="1.5"></circle><circle cx="17.5" cy="19.5" r="1.5"></circle><path d="M13 13h2v-2.99h2.99v-2H15V5.03h-2v2.98h-2.99v2H13V13z"></path><path d="M10 17h8a1 1 0 0 0 .93-.64L21.76 9h-2.14l-2.31 6h-6.64L6.18 4.23A2 2 0 0 0 4.33 3H2v2h2.33l4.75 11.38A1 1 0 0 0 10 17z"></path></svg>
              <a> + Carrito</a></div>
            </div>
            
            <h5 id="title_fotter_pagos"> Metodos de pago</h5>
            <div id="fotter_pagos">
              <img src="/img/logo_nequi.webp" alt="">
              <img src="/img/bancolombia.webp" alt="">
              <img src="/img/daviplata.webp" alt="">
              <img src="/img/al_recivir.webp" alt="">
            </div>
          </div>


        </div>
        <script>
          var btn_whatsap = document.getElementById("whatsapp");
          
          var nombre_cliente = document.querySelector("#nombre_cliente1");
          var doc_cliente = document.querySelector("#documento_cliente1");
          var direccion_cliente = document.querySelector("#direccion_cliente");
          var cant_prod = document.querySelector("#cant_prod");
          var nombre_prod1 = document.querySelector("#nombre_view");
          var medida_prod = document.querySelector("#medida");
          var disponible = document.querySelector("#disponible");
          var stock_prod = document.querySelector("#stock_prod");
          var valor_view = document.querySelector("#valor_view");
          
          
       
          doc_cliente.style.border = "2px solid black";
          nombre_cliente.style.border = "2px solid black";
          
          btn_whatsap.removeAttribute('href');
          doc_cliente.value = 0;
         
          nombre_cliente.addEventListener('keydown', (event) => {
           btn_whatsap.style.cursor = "pointer"
        
          doc_cliente.style.border = "2px solid black";
          nombre_cliente.style.border = "1px solid black";
      
          
          })

          btn_whatsap.onclick = function () {



            if (nombre_cliente.value == "" || doc_cliente.value == 0) {
              btn_whatsap.removeAttribute('href');
              doc_cliente.style.border = "2px solid red";
              doc_cliente.setAttribute('placeholder', "ingrese documento porfavor");
              
              nombre_cliente.style.border = "2px solid red"
              nombre_cliente.setAttribute('placeholder', "ingrese nombre porfavor");
              btn_whatsap.style.cursor = "not-allowed"
            } else {
              let new_name = nombre_prod1.innerHTML.replace("&amp;", "y");

              if(cant_prod.value>1){
                btn_whatsap.setAttribute('href', "https://wa.me/57<%= general[0].numWhatsapp %>?text= Hola, minombre es" + " " + nombre_cliente.value + "%0A %0A" + "Quiesiera hecer un pedido de " + cant_prod.value+ "" + medida.innerHTML +"S"+ " " + "de" +
               "  " + new_name + "🙏" + "%0A %0A" + "Mi direccion es:" + " " + direccion_cliente.value + "%0A %0A" + "Mi documento es:" + " " + doc_cliente.value);
                 let cant=parseInt(stock_prod.innerHTML);
                 let new_stock= cant-parseInt(cant_prod.value);
                


                 
             
              }else{
                

            btn_whatsap.setAttribute('href', "https://wa.me/57<%= general[0].numWhatsapp %>?text= Hola, minombre es" + " " + nombre_cliente.value + "%0A %0A" + "Quiesiera hecer un pedido de " + cant_prod.value + "" + medida.innerHTML + " " + "de" +
               "  " + new_name + "🙏" + "%0A %0A" + "Mi direccion es:" + " " + direccion_cliente.value + "%0A %0A" + "Mi documento es:" + " " + doc_cliente.value);
              //var loader=document.querySelector("#loader")
             let cant=parseInt(stock_prod.innerHTML);
              let new_stock= cant-parseInt(cant_prod.value);
              window.location = "/stock/"+nombre_prod1.innerHTML+"/"+new_stock;
              //var loader=document.querySelector("#loader")
              }
              
            
             
              cant_prod.style.border = "2px solid black";
              nombre_cliente.style.border = "1px solid black"
              nombre_cliente.setAttribute('placeholder', "");
              btn_whatsap.style.cursor = "pointer"




              doc_cliente.value = 0
              cant_prod.value = 0
              nombre_cliente.value ="cale"
              direccion_cliente.value ="dsds"
              btn_whatsap.style.cursor = "not-allowed"
              //   btn_whatsap.removeAttribute('href');
              //  location.reload()
            }


          }
      
          var add_car=document.querySelector("#add_car")
          add_car.onclick=function(){

            var nombreuser= document.querySelector("#nombre_user") 
          let new_valorcar=parseFloat(valor_view.innerHTML)*1000
          var nombre=nombreuser.innerHTML;
      var carro={
          nombreProd: nombre_prod1.innerHTML,
           valor:new_valorcar,
           cantidad:"1"
      }
      if(nombre){
       
        
     socket.emit("sendprod", nombre, carro)
     swal("Exito!", "Producto agregado al carrito", "success")

     }else{
      swal({
        title: "Inicie secion por favor1",
        text: "para poder agregar al carrito",
        timer: 3000,
        showConfirmButton: false
});
      }
          }
        
        </script>
      </div>
      <div class="loader" id="loader">
        <div class="justify-content-center jimu-primary-loading"></div>
      </div>
    </div>

    <div id="promos">

      <% promo.forEach(function(prom) { %>
        <% if (prom.nombre==" " ) { %>
          <% } else{ %>

            <div class="cont_slider">

              <img id="img_slider4" src="<%= prom.imagen %>" alt="">
              <button id="mostrar_pop"
                onclick="mostrar('<%= prom.nombre %>','<%= prom.promo %>','<%= prom.imagen %>')"></button>
              <img class="img_logo" src="/img/logo1.png" alt=""
                style="width: 17vw; height: 15vw; position:absolute;display: flex; right: 35px; opacity: 0.6;">
              <div id="caract_product">
                <h1 class="nombre_prod_slide" id="nombre_prom4">
                  <%= prom.nombre %>
                </h1>

                <h1 class="valor_prod_slide" id="descuento4">
                  <%= prom.valor %>
                </h1>

                <h1 id="new_valor4">
                  <%= prom.promo %>
                </h1>
                <p class="mensaje_prod_slide" id="mensaje_promo4">
                  <%= prom.mensaje %>
                </p>

              </div>


            </div>
            <% } %>
              <% }) %>


    </div>
    <script>


      function mostrar(nombre, valor,promo, image, descrip, medida, cantidad) {
        var cart= document.getElementById(nombre);
        var nombrecliente = document.querySelector("#nombre_cliente1");
        var direccion_cliente = document.querySelector("#direccion_cliente");
        var cant_prod = document.querySelector("#cant_prod");
        var nombre_prod1 = document.querySelector("#nombre_view");
        var disponible = document.querySelector("#disponible");
        var old_price = document.querySelector("#valor_old");
        var label_porcent = document.querySelector("#etiq_descuentoSlide");
        var btn_whatsap = document.getElementById("whatsapp");
        label_porcent.innerHTML=" "
        old_price.innerHTML=" "
        let padre= cart.parentNode;
        padre.style="border=0;"
        if(promo){
         if(promo=="0"){
         label_porcent.style.visiblitily="hidden"

         document.querySelector("#valor_view").innerHTML = parseFloat(valor/1000).toFixed(3);

         }else{
         label_porcent.innerHTML=promo+"%OFF";
          let intpromo= parseInt(promo);
          let intvalor= parseInt(valor);
          let porcentaje=valor*(promo/100);
          let new_valor1=valor-porcentaje;
          let new_valor=new_valor1/1000;
          document.querySelector("#valor_view").innerHTML=new_valor.toFixed(3);
          old_price.innerHTML="$"+valor;

        
        
         }
        }  else{
        
        label_porcent.style.visiblitily="hidden"


        document.querySelector("#valor_view").innerHTML = parseFloat(valor/1000).toFixed(3);
        }
        if(cantidad=="0"){
 
          disponible.innerHTML="agotado!!!"
          disponible.style.background="red"
          
        }
        else{
          disponible.innerHTML="disponible!!!"
          disponible.style.background="#14c211"
        }

        cant_prod.value = 0
        nombre_cliente.value = ""
        direccion_cliente.value = " "

        document.querySelector("#pop-up").classList.add("active")
        let new_name = nombre.replace("&amp;", "&");
        nombre_prod1.innerText = new_name

     
        document.querySelector("#desccripcion_view").innerHTML = descrip
        document.querySelector("#stock_prod").innerHTML = cantidad
        

     if(medida=="UNUDAD"){

         let medida_new="UNIDAD"
          document.querySelector("#medida").innerHTML = medida_new
        }else{

          document.querySelector("#medida").innerHTML = medida
        }

        document.querySelector("#image_prod").setAttribute('src', image)

        if(disponible.innerHTML=="agotado!!!"){
         btn_whatsap.style="pointer-events:none;";
        
          
          document.querySelector(".cont-whatsapp").style.background="red"
          document.querySelector("#whatsapp_span").innerHTML="No disponible!!"

        }else{
          btn_whatsap.style="pointer-events:all;";
          document.querySelector(".cont-whatsapp").style.background="#0099FF"
          document.querySelector("#whatsapp_span").innerHTML="Comprar"
        }
        document.getElementById("close_view").onclick = function () {

          
          document.querySelector("#pop-up").classList.toggle("active")

         
          doc_cliente.style.border = "2px solid black";
          nombre_cliente.style.border = "1px solid black";
        }

      }



    </script>
   
    
    
    <h1 id="titulo_cat" style="text-align: center; ;">CATALOGO PRODUCTOS EL COMPETIDOR</h1>
    <p id="head_recomend">Haz clik sobre la imagen , podras ver la descripcion del producto y ordenar tu pedido.</p>
    <div class="buscador">
    <input type="text" id="input_buscar" list="options1"> <a id="buscar_prod" href="#">buscar</a>
  
</div>
<ul id="box-search">

 
 
  
</ul>
<script>
  var buscarbtn=document.querySelector("#buscar_prod");
  var inputfind=document.querySelector("#input_buscar");
  var box_serach=document.querySelector("#box-search");

  function buscador_interno(){
  var filtro=inputfind.value.toUpperCase();
  
    var li= box_serach.getElementsByTagName("li");

    for (let i = 0; i < li.length; i++) {
      var a=li[i].getElementsByTagName("a")[0];
      textvalue=a.textContent || a.innerText;
      
     if(textvalue.toUpperCase().indexOf(filtro)>-1){
       li[i].style.display=""
       a.onclick=function(){
       
        inputfind.value=li[i].innerText;
        box_serach.style.display="none"
       }
      box_serach.style.display="block"

      if(filtro===""){
        box_serach.style.display="none"
      }
     }else{
      li[i].style.display="none"
     }
      
    }
  }

  inputfind.addEventListener("keyup", buscador_interno) ;

  buscarbtn.onclick=function(){
     this.setAttribute("href", "#"+inputfind.value)
    
   var selected=  document.getElementById(inputfind.value)
    var padre=selected.parentNode;
    padre.classList.add("show")
    inputfind.value=""
  }

  </script>
    <div id="cont_product" style="margin-top: 30px; padding: 10px; gap: 10px; left: 0; background: #f9f7f7;">



      
      <section id="alimentos">
        <h1 class="title_section" id="title_section" style="text-align: center; margin-top: 50px;">Alimentos</h1>
        <div class="seccion" id="seccion_alimentos">
            </div>
      </section>

      
      <section id="aseo_personal">
        <h1 class="title_section" style="text-align: center; margin-top: 50px;">Aseo Personal</h1>
        <div class="seccion" id="seccion_aseo personal">
   
            </div>
      </section>
      
      <section id="aseo">
        <h1 class="title_section" style="text-align: center; margin-top: 50px;">Aseo</h1>
        <div class="seccion" id="seccion_aseo">
       
          </div>
      </section>
      
      <section  id="hogar">
        <h1 class="title_section" style="text-align: center; margin-top: 50px;">Hogar</h1>
        <div class="seccion" id="seccion_hogar">
       
        </div>
      </section>

    
      <section  id="ferreteria">
        <h1 class="title_section" style="text-align: center; margin-top: 50px;">Ferreteria</h1>
        <div class="seccion" id="seccion_ferreteria">
        
              </div>
      </section>
      
      <section  id="salud">
        <h1 class="title_section" style="text-align: center; margin-top: 50px;">Salud</h1>
        <div class="seccion" id="seccion_salud">
       
           
            </div>
      </section>
      
      <section  id="cosmetica">
        <h1 class="title_section" style="text-align: center; margin-top: 50px;">Cosmetica</h1>
        <div class="seccion" id="seccion_cosmetica">
        
            </div>
      </section>
      
      

      <section  id="papeleria">
        <h1 class="title_section" style="text-align: center; margin-top: 50px;">Papeleria</h1>
       
     
        <div class="seccion" id="seccion_papeleria">
           
           
        </div>
      </section>
      
       
        <% prods.forEach(function(prod) { %>
<script>


 var nombre='<%= prod.nombre %>'; var valor='<%= prod.valor %>'; var cate='<%= prod.categoria %>'; var imagen='<%= prod.imagen %>'
 var descripcion='<%= prod.descripcion %>'; var promo="<%= prod.promo %>"
 var secc_prod=document.getElementById("seccion_"+cate)
 var secc=document.getElementById(cate)
 var title_section=document.createElement("h1");
 title_section.id="title_section"

 var listop=document.getElementById("box-search")
 

  var buscar_btn=document.getElementById("input_buscar")
  var li_options1= document.createElement("li");
  var a_options1= document.createElement("a");
////llenando li de busqueda
  a_options1.innerHTML='<%= prod.nombre %>'
  li_options1.appendChild(a_options1)
  listop.appendChild(li_options1)

   ///////CREANDO CARD DE PRODUCTO
  var cats=["ferreteria","hogar","papeleria","varios", "aseo personal","salud","alimentos","cosmetica","aseo"]
  var cont_prod= document.querySelector(".seccion")
  if(cats.includes(cate)){ 
   var card=document.createElement("div");
   card.id="catalogo"
  
   var img_prod=document.createElement("img")
   img_prod.id=nombre
   img_prod.setAttribute("src", imagen)
   var revisar=document.createElement("button");
  revisar.id="revisar"
  var descipcion=document.createElement("div");
  descipcion.id="descript"
  var nombre_prod=document.createElement("h3");
  
   nombre_prod.className="nombre-prod";
   var codigo=document.createElement("p");
   var prod_valor=document.createElement("h4");
   revisar.setAttribute("onclick","mostrar('<%= prod.nombre %>',"+valor+",'<%= prod.promo %>','<%= prod.imagen %>','<%= prod.descripcion %>','<%= prod.medida %>','<%= prod.cantidad %>')");
  if(promo){
    if(promo=="0"){

    }else{
      var label_prom=document.createElement("a");
      label_prom.id="etiq_descuento";
      label_prom.innerHTML=promo+"%OFF"
      revisar.appendChild(label_prom)   
    }
  }
   codigo.innerHTML="<%= prod.codigo %>"
   prod_valor.innerHTML="$"+valor
   //let new_name = nombre.replace("y", "&");
   nombre_prod.innerHTML=nombre
  descipcion.appendChild(nombre_prod)
  descipcion.appendChild(codigo)
  descipcion.appendChild(prod_valor)
  card.appendChild(revisar)
  card.appendChild(img_prod)
  card.appendChild(descipcion) 
  secc_prod.appendChild(card)
}
  
</script>
<% }) %>
      

    <script>

      //////TOGGLE DIC SECCION
      var conten=document.getElementById("cont_product")
      
      var sec=document.getElementsByClassName("seccion")
    
        var conten_child=conten.children
       
        for (let index = 0; index < conten_child.length; index++) {
              let hijastro = conten_child[index];
               let title=hijastro.children
              var div_toggle= title[0];

              
              div_toggle.onclick= function(){
                title[1].classList.toggle("active")
               }
              
        }
      
   


    </script>

  </div>


 

  </div>
  <style>
    
   
      
    .wrapper {
      position: fixed;
      z-index: 9999;
      top: 65%;
      margin-left: 85%;
      gap: 5px;
      padding: 5px;
      right: 1%;
      display: flex;
      flex-wrap: wrap;
      list-style: none;
      padding-left: 50px;
      margin-top: 1%;
      height: 0px;
      width: 50px;
      float: right;
      padding-top: 20px;
      font-family: "Poppins", sans-serif;
      justify-content: center;
    }

    .wrapper img {
      height: auto;
      width: 100%;


    }

    .wrapper .icon {

      float: left;
      visibility: visible;
      position: relative;
      background: none;
      border-radius: 50%;
      bottom: auto;

      margin: auto;
      width: 2.5em;
      height: 2.5em;
      font-size: 18px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      flex-direction: column;

      cursor: pointer;
      transition: all 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .wrapper .tooltip {

      position: absolute;
      top: 0;
      font-size: 14px;
      background: #fff;
      color: #fff;
      padding: 5px 8px;
      border-radius: 5px;
      box-shadow: 0 10px 10px rgba(0, 0, 0, 0.1);
      opacity: 0;
      pointer-events: none;
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);

    }

    .wrapper .tooltip::before {
      position: absolute;
      content: "";
      height: 8px;
      width: 8px;
      background: #fff;
      bottom: -3px;
      left: 50%;
      transform: translate(-50%) rotate(45deg);
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .wrapper .icon:hover .tooltip {
      top: -45px;
      opacity: 1;
      visibility: visible;
      pointer-events: auto;
    }

    .wrapper .icon:hover span,
    .wrapper .icon:hover .tooltip {
      text-shadow: 0px -1px 0px rgba(0, 0, 0, 0.1);
    }

    .wrapper .facebook:hover,
    .wrapper .twitter:hover,
    .wrapper .instagram:hover {
      transform: scale(1.2);
    }

    .wrapper .facebook {


      transform: scale(1.1);
    }

    .wrapper .facebook:hover .tooltip,
    .wrapper .facebook:hover .tooltip::before {

      background: #0566e4e5;

    }


    .wrapper .twitter:hover .tooltip,
    .wrapper .twitter:hover .tooltip::before {
      background: #62f47aee;

      color: #fff;
    }


    .wrapper .instagram:hover .tooltip,
    .wrapper .instagram:hover .tooltip::before {
      background: #e4405ee9;

      color: #fff;


    }


    /*load*/

    .loader {

      top: 0;
      bottom: 60%;
      left: 0;
      right: 0;
      opacity: 0;
    }

    .jimu-primary-loading:before,
    .jimu-primary-loading:after {

      position: absolute;
      top: 0;
      content: '';
    }

    .jimu-primary-loading:before {
      left: -19.992px;
    }

    .jimu-primary-loading:after {
      left: 19.992px;
      -webkit-animation-delay: 0.32s !important;
      animation-delay: 0.32s !important;
    }

    .jimu-primary-loading:before,
    .jimu-primary-loading:after,
    .jimu-primary-loading {
      background: #076fe5;
      -webkit-animation: loading-keys-app-loading 0.8s infinite ease-in-out;
      animation: loading-keys-app-loading 0.8s infinite ease-in-out;
      width: 13.6px;
      height: 32px;
    }

    .jimu-primary-loading {
      text-indent: -9999em;
      margin: auto;
      position: absolute;
      right: calc(50% - 6.8px);
      top: calc(50% - 16px);
      -webkit-animation-delay: 0.16s !important;
      animation-delay: 0.16s !important;

    }

    @-webkit-keyframes loading-keys-app-loading {

      0%,
      80%,
      100% {
        opacity: .75;
        box-shadow: 0 0 #076fe5;
        height: 32px;
      }

      40% {
        opacity: 1;
        box-shadow: 0 -8px #076fe5;
        height: 40px;
      }
    }

    @keyframes loading-keys-app-loading {

      0%,
      80%,
      100% {
        opacity: .75;
        box-shadow: 0 0 #076fe5;
        height: 32px;
      }

      40% {
        opacity: 1;
        box-shadow: 0 -8px #076fe5;
        height: 40px;
      }
    }
  </style>
  <ul class="wrapper">
    <li class="icon facebook">
      <a href="" style="text-decoration: none;"> <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/51/Facebook_f_logo_%282019%29.svg/900px-Facebook_f_logo_%282019%29.svg.png"></img></a>
      <span class="tooltip">Facebook</span>
      <span><i class="fab fa-facebook-f"></i></span>
    </li>
    <li class="icon twitter">
      <% general.forEach(function(num) { %>




        <a target="_blank" href="https://wa.me/57<%= num.numWhatsapp%>?text= Hola, quisiera mas infomacion."
          style="text-decoration: none;"> <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/225px-WhatsApp.svg.png"></img></a>
        <% }) %>
          <span class="tooltip">whatsapp</span>
          <span><i class="fab fa-twitter"></i></span>
    </li>
    <li class="icon instagram">
      <a href="" style="text-decoration: none;"> <img src="data:image/png;base64,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"></img></a>
      <span class="tooltip">Instagram</span>
      <span><i class="fab fa-instagram"></i></span>
    </li>
  </ul>
</body>
<footer>

  <div id="footer">
    <div id="info_footer">
      <button id="subir"><svg xmlns="http://www.w3.org/2000/svg" width="42" height="40" viewBox="0 0 24 24" style="fill: rgb(33, 106, 196);"><path d="m6.293 11.293 1.414 1.414L12 8.414l4.293 4.293 1.414-1.414L12 5.586z"></path><path d="m6.293 16.293 1.414 1.414L12 13.414l4.293 4.293 1.414-1.414L12 10.586z"></path></svg></button>
      <h2>Distribuciones El Competidor</h2>

      <p>Empresa con mas de 20 años de experiencia, brindando el mejor servicio a sus clintes a lo largo del territorio
        caucano y departamentos
        vecinos como huila, valle del cauca y nariño, el claro testimonio de nuestros clientes certifica nuestro compromiso para llevar
        los mejores productos a los mejores precios del mercado hasta la puerta
        de su negocio </p>
      <p>Calle 2 #1-15, Popayan, Cauca, 190003
        Colombia</p>

      <p>contacto <%= numwh %>    <br>correo: distrielcompetidor@gmail.com
      </p>

<script>
 

const showOnPx = 100;
const scrollContainer = () => {
  return document.documentElement || document.body;
};
document.addEventListener("scroll", () => {
  let btn_subi=document.getElementById("subir")
  if (scrollContainer().scrollTop > showOnPx) {
    btn_subi.classList.add("show")
  } else {
    btn_subi.classList.remove("show")
  }
})


   var btn_subir=document.getElementById("subir")
    btn_subir.onclick=function(){
     window.scrollTo({
      top:0,
      behavior:"smooth"
     })
      
    }
</script>

    </div>
    <div id="footer_mapa">

      <iframe class="cont-map"
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d360.0482099722832!2d-76.60129363700528!3d2.4424710681519723!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e30038dd39d1d99%3A0x9bfaed77e91de30a!2sDistribuciones%20el%20Competidor!5e0!3m2!1ses!2sco!4v1680750449448!5m2!1ses!2sco"
        style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>

    </div>
  </div>
</footer>
<script type="text/javascript" src="jspdf.min.js"></script>
<script src="/main.js"></script>
</html>
